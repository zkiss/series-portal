<?xml version="1.0" encoding="UTF-8"?>
<project name="build-all" default="deploy">

	<import file="common.xml" />

	<target name="clean-all">
		<delete dir="${dist-all}" />
		<ant dir="${dir-common}" target="clean" />
		<ant dir="${dir-ejb}" target="clean" />
		<ant dir="${dir-web}" target="clean" />
	</target>

	<target name="dist-all">
		<ant dir="${dir-common}" target="dist" />
		<ant dir="${dir-ejb}" target="dist" />
		<ant dir="${dir-web}" target="dist" />
	</target>

	<target name="deploy">
		<ant dir="${dir-common}" target="deploy" />
		<ant dir="${dir-ejb}" target="deploy" />
		<ant dir="${dir-web}" target="deploy" />
	</target>

	<target name="clean-jboss">
		<delete dir="${jboss.server}\work" />
		<delete dir="${jboss.server}\tmp" />
		<delete dir="${jboss.server}\data" />
		<delete dir="${jboss.server}\log" />
	</target>

	<target name="run-jboss">
		<exec executable="cmd" spawn="true">
			<arg value="/c" />
			<arg value="start" />
			<arg value="${jboss.basedir}\bin\debug.bat" />
			<arg value="-c" />
			<arg value="${jboss.servername}" />
			<arg value="-b${jboss.bind.address}" />
		</exec>
	</target>

</project>

